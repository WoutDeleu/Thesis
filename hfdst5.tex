%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%                                                                 %
%                            CHAPTER                              %
%                                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Resultaten en Evaluatie}
De aanval werd tot hiertoe al volledig beschreven en toegelicht, en de dataset
die gebruikt wordt om de aanval werd ook al besproken. Dit hoofdstuk bespreekt
hoe de evaluatie wordt aangepakt, wat de bekomen resultaten zijn en wat ze
betekenen.

\section{Evaluatie van de aanval}
Het doel van de aanval is om een locatie te voorspellen waar een gebruiker bij
zijn activiteiten vertrekt of aankomt, ondanks het feit dat deze locatie wordt
verborgen door het gebruik van een \ac{EPZ}. Maar indien we dit zouden
uittesten op activiteiten die al een \ac{EPZ} bevatten zouden we de bekomen
resultaten niet kunnen verifiëren. Daarom zullen we de aanval uittesten en
evalueren op publieke activiteiten die geen \ac{EPZ} bevatten, en deze manueel
voorzien van een \ac{EPZ}. Zo kunnen we de bekomen resultaten vergelijken met
een referentie, namelijk de \textit{grondwaarheid} of de \ac{GT}.

\subsection{De grondwaarheid}\label{sec:groundtruth}
De grondwaarheid van een gebruiker is de effectieve woonplaats, of de plaats
waar deze persoon meestal vanuit vertrekt of aankomt. Dit is de locatie die we
beschouwen als degene waarrond de \ac{EPZ} wordt aangebracht, en dat tracht
verborgen te worden. De grondwaarheid is dus de locatie die we trachten te
achterhalen. We bepalen deze locatie door alle activiteiten van een gebruiker
te overlopen, en indien 15 of meer begin- of eindpunten binnen een straal van
50 meter liggen, dan berekenen we hiervan het gemiddelde en wordt dit
gemiddelde gemapt op de roadgraph. Dit punt gematcht op de roadgraph stelt dan
een grondwaarheid voor van deze gebruiker. Hassan et al.\ stelden dat 50 meter
vergelijkbaar is met een breedte van een gemiddeld perceel, en dat dit dus een
goede benadering is van de grondwaarheid~\cite{sec18has3:online,
    Verdonck_2022}. Let wel, het kan dat éen gebruiker meerdere grondwaarheden
bevat.

Een tweede kanttekening die we hierbij moeten maken is dat de effectieve begin-
en eindlocaties niet altijd perfect op het wegennetwerk zullen liggen. Een
gebruiker kan bijvoorbeeld starten op een parking of een oprijlaan, wat niet
vervat zit in het netwerk. Wij mappen deze dan achteraf op het straatnetwerk,
maar gedurende de upload berekent het platform in kwestie wel de totale
afgelegde afstand tot het effectieve startpunt. Dit kan dus voor een afwijking
bij de predicties zorgen.~\citeauthor{Dhondt} onderzochten deze afwijking door
deze afwijking in een \ac{CDF} te plotten, en op zoek te gaan naar het
elleboogpunt~\cite{Dhondt}. Het elbow point is een visueel punt in de curve
waar zich een knik voordoet~\cite{Introduc22:online}. Dit duidt in theorie de
optimale afweging tussen lage afwijking en hoge precisie aan. Zo
bekomen~\citeauthor{Dhondt} een drempelwaarde van 22.95 meter om van een
succesvolle aanval te kunnen spreken. Deze drempelwaarde is toepasselijk voor
92\% van de gebruikers.
\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth]{fig/Afwijkingen&Analyses/OvershootMappingDistance.png}
    \caption{Dhondt et al.\ bepaalt grafisch de trend van de afwijkingen bij het snappen van locaties op het wegennetwerk~\cite{Dhondt}}\label{fig:overshootMappingDistance}
\end{figure}

\subsection{Manueel aanbrengen van een EPZ}\label{sec:zelf_cloaking}
We werken zoals al eerde vermeld met publieke activiteiten die geen \ac{EPZ},
om zo de het evaluatieproces te versimpelen. Maar om de aanval te kunnen
uitvoeren moet we dus nog manueel een \ac{EPZ} aanbrengen. Zo kunnen we een
situatie creëren die de werkelijke situatie benadert, en kunnen we ons
aanvalsmodel uitvoeren. Het is dus wel belangrijk dat de aangebrachte \ac{EPZ}
op een realistische manier wordt aangebracht, op een manier die de
werkelijkheid weerspiegelt.

Sectie~\ref{sec:EPZ} bespreekt al uitvoerig het mechanisme van een \ac{EPZ}, en
hoe deze wordt bepaald. Om het even kort te recapituleren, een \ac{EPZ} wordt
bepaald door een centraal punt (de gevoelige locatie), wat een willekeurige
translatie zal ondervinden\footnote{In de context van de beschrijving van
    Hassan et al.\ gebeurd er geen translatie, maar deze thesis gaat wel degelijk
    uit van een model waarbij spatial cloaking op toegepast
    is~\cite{sec18has3:online}.}, en een gekozen straal. Vanaf het getransleerde
punt wordt een cirkel opgezet met de desbetreffende straal. Strava als
fitnessplatform heeft de grootste keuze uit mogelijke stralen, namelijk van 200
meter tot 1600 meter in sprongen van 200 meter. Het doel is om de effectiviteit
van de aanval vast te leggen voor verschillende radiussen, dus zullen we per
gebruiker en per aanval een \ac{EPZ} opzetten met alle verschillende radiussen.
Zo kunnen we het effect van de radius zien, maar ook de types aanval onderling
onafhankelijk van de straal vergelijken. We starten dus vanaf de \ac{GT}. Deze
locatie ondervindt dan een willekeurige translatie. De verschuiving van het
punt kan gebeuren in alle richting, en kiezen we dus willekeurig. De afstand
van de translatie kan in principe ook willekeurig worden gekozen, maar moet wel
binnen bepaalde grenzen liggen, namelijk tussen 0 en 70\% van de straal van de
\ac{EPZ}. De cirkel kan dan worden opgesteld, met als middelpunt het
getransleerde punt, en de bijhorende straal. Alle punten die zich binnen deze
zone bevinden, zullen worden verwijdert uit de activiteit.
% Figuur: 3 stappen hoe een EPZ wordt opgezet

BETROUWBAARHEIDSINTERVALLEN =$>$ VRAGEN THOMAS \newline dit is hoe ik het
interpreteer

\subsection{Bootstrapping}
Bij het uittesten van de aanval wordt de aanval niet zomaar gedraaid op alle
activiteiten per gebruiker. Dit zou vertekende resultaten kunnen geven. Per
gebruiker wordt een betrouwbaarheidsinterval berekent via
bootstrapping~\cite{Dhondt, Verdonck_2022}. Per gebruiker wordt de set met
manueel ververhulde activiteiten beschouwd. Het bootstrapalgoritme kiest
hieruit willekeurig één voor één activiteiten, en plaatst deze in een nieuwe
groep totdat deze nieuwe groep activiteiten even groot is als de originele set
van activiteiten. Let wel, het algoritme kan meerdere malen dezelfde activiteit
kiezen, dus met andere woorden kan de nieuw gemaakte groep duplicaten bevatten
en bepaalde activiteiten helemaal niet bevatten. Dit gebeurt 1000 keer, en er
worden dus 1000 verschillende sets gemaakt. Voor elke set zal dan een zal een
voorspelling worden uitgevoerd. Zo bekomen we een aantal voorspelde locaties,
waarvan er een kans is dat enkele locaties meerdere malen voorspeld worden. Op
Figuur~\ref{fig:bootstrapping} is te zien hoe de distributie eruit ziet op een
kaart~\cite{Verdonck_2022}. Op de figuur zijn de individuele voorspelling
aangeduidt met een blauwe tot paarse kleur, afhankelijk van hoe frequent ze
voorspeld werden (hoe meer naar de paarse of rode kleur ligt, hoe frequenter de
node voorspeld is). Ook zichtbaar zijn de start- en eindpunten, met een
verschillend kleur per \ac{E.G.}. De locatie van de grondwaarheid is aangeduid
door de groene marker.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.6\textwidth]{fig/bootstrapping.png}
    \caption{Voorbeeld van een distributie van voorspellingen bepaald door het bootstrapalgoritme~\cite{Verdonck_2022}}\label{fig:bootstrapping}
\end{figure}

\subsection{Evaluatie metrieken}
Om iets zinnigs te kunnen vertellen over de effectiviteit van de aanval,
definiëren we enkele metrieken die we kunnen gebruiken om de aanval te
evalueren.

De eerste evaluatie metriek is de \textit{Success Rate}~\cite{Dhondt}. Dit is
het percentage van de uitgevoerde aanvallen waar de gevoelige locatie succesvol
is achterhaald. Rekening houdend met de overshoots die komen met het snappen
van locaties op het wegennetwerk, is een correcte locatie een locatie die zich
binnen een straal van 22.95 meter van de \ac{GT} bevindt. De succes rate is dus
het percentage van de aanvallen waar de correcte locatie zich binnen deze
straal bevindt. Hoe hoger het percentage, hoe succesvoller de aanval.

De \textit{Correctness} van een aanval is de som van de Euclidische afstanden
tussen de \ac{GT} en de voorspelde locatie gedeeld door het aantal keer deze
locatie werd voorspeld~\cite{Dhondt, Verdonck_2022}. Dit geeft een indicatie
van de gemiddelde afwijking in afstand van de voorspelde locaties ten opzichte
van de \ac{GT}. Hoe lager deze waarde, hoe preciezer de aanval. Let wel, een
succes rate kan hoog zijn, maar de correctheid kan nog steeds hoog zijn. Dit
duidt op een aanval die veel overshoots heeft, maar waar de correcte locatie
zich wel binnen de straal van 22.95 meter bevindt.

De \textit{Accuracy} definiëren we als de breedte van het
betrouwbaarheidsinterval~\cite{Dhondt, Verdonck_2022}. Met de breedte van het
betrouwbaarheidsinterval doelen we op het aantal unieke voorspellingen, het
aantal nodes dat precies eenmalig worden voorspeld. Hoe meer unieke nodes, hoe
hoger de accuracy en ook hoe minder `zeker' onze voorspelling is.

De \textit{Reduction of the k-anonymity set} kwantificeert de de afname in de
set van alle mogelijke eindlocaties voor en na de effectieve predicties bij een
aanval~\cite{Dhondt, Verdonck_2022}. De mogelijke eindlocaties voor de aanval
zijn simpelweg alle nodes in de graafvoorstelling, eventueel begrensd door de
\ac{EPZ}. Degene na de aanval zijn al degene die voorspelt worden. De reduction
is dus een percentage die het verschil tussen de twee sets aangeeft. Hoe hoger
de reduction, hoe meer nodes verdwijnen uit de set van mogelijke eindlocaties
na de aanval. Dit zegt dus iets over de hoeveelheid kandidaten het algoritme
voorspelt, ten opzichte van hoeveel kandidaten er mogelijk zijn.

De \textit{Uncertainty Region} is de som van oppervlaktes van de
unie\footnote{De unie van de oppervlakte van twee cirkels is de som van de twee
    oppervlakten, min één maal het overlappende deel.} van de onzekerheidsregio's
rond de voorspelde nodes~\cite{Dhondt,Verdonck_2022}. De chaining distance, die
in ons geval drie meter aanneemt, veroorzaakt deze onzekerheidsregio's.
Aangezien pas om de drie meter een node bestaat, zal voor elk punt die op deze
node gemapt is een mogelijkheid bestaan dat deze eigenlijk ergens anders in de
een zone van drie meter rond de node ligt. Hoe groter deze waarde, hoe groter
de onzekerheid van de aanval, aangezien dit wijst op weinig overlap.

De laatste evaluatiefactor is de \textit{Degree of
    Anonymity}~\cite{Dhondt,Verdonck_2022}. Dit is de genormaliseerde entropie van
de verwachte distributie. Deze wordt genormaliseerd op basis van de maximale
mogelijke entropie, en wordt bepaald op basis van percentage $p_v$. Dit is een
percentage die aangeeft bij hoeveel percent van de voorspellingen node $p$
voorspelt wordt. Dit zal voor vele nodes gelijk zijn aan 0. De maximale
entropie komt voor indien elke node exactly evenveel voorspelt wordt, en is dus
gelijk aan $\frac{1}{\# nodes}$

\section{Resultaten}
\begin{table}[h]
    \centering
    \scalebox{0.5}{
        \begin{tabular}{lrrrrrrrr}
            \toprule
            {}         & Success Rate (\%) & Correctness (m) & Accuracy & Reduction (\%) & Uncertainty Region ($m^2$) & Certainty & Spatial Certainty & Degree of Anonymity (\%) \\
            Radius (m) &                   &                 &          &                &                            &           &                   &                          \\
            \midrule
            200        & 89.86             & 28.61           & 17       & 86.06          & 352.08                     & 2.06      & 0.58              & 30.69                    \\
            600        & 70.37             & 79.94           & 24       & 96.52          & 502.42                     & 2.32      & 1.12              & 27.15                    \\
            800        & 73.33             & 113.68          & 27       & 97.05          & 670.53                     & 2.47      & 1.31              & 26.86                    \\
            1000       & 68.64             & 166.74          & 33       & 97.84          & 777.57                     & 2.62      & 1.54              & 27.25                    \\
            1200       & 58.33             & 180.97          & 27       & 98.15          & 684.71                     & 2.55      & 1.57              & 26.25                    \\
            1400       & 57.14             & 235.76          & 33       & 98.61          & 782.30                     & 2.54      & 1.82              & 25.31                    \\

            \bottomrule
        \end{tabular}
    }
    \captionsetup{justification=centering}
    \caption{Aanval volgens het model van Dhondt et al.~\cite{Dhondt}}\label{tab:aanval_karel}
\end{table}
\begin{table}[h]
    \centering
    \scalebox{0.5}{
        \begin{tabular}{lrrrrrrrr}
            \toprule
            {}         & Success Rate (\%) & Correctness (m) & Accuracy & Reduction (\%) & Uncertainty Region ($m^2$) & Certainty & Spatial Certainty & Degree of Anonymity (\%) \\
            Radius (m) &                   &                 &          &                &                            &           &                   &                          \\
            \midrule
            200        & 81.43             & 35.96           & 15       & 86.01          & 322.32                     & 1.91      & 0.68              & 28.33                    \\
            400        & 79.71             & 51.38           & 21       & 93.78          & 445.30                     & 2.26      & 0.92              & 27.80                    \\
            600        & 70.77             & 96.94           & 23       & 95.78          & 542.48                     & 2.33      & 1.18              & 27.34                    \\
            800        & 65.83             & 113.18          & 30       & 97.28          & 703.00                     & 2.48      & 1.41              & 27.38                    \\
            1000       & 62.39             & 191.47          & 31       & 97.60          & 698.69                     & 2.62      & 1.62              & 27.31                    \\
            1200       & 57.98             & 212.06          & 36       & 97.86          & 850.01                     & 2.62      & 1.76              & 27.13                    \\
            1400       & 49.15             & 270.35          & 29       & 98.54          & 648.70                     & 2.51      & 1.72              & 24.90                    \\
            \bottomrule
        \end{tabular}
    }
    \captionsetup{justification=centering}
    \caption{Aanval op basis van gegeven \textit{outer distance}, en snelheid}\label{tab:outerDistance}
\end{table}
\begin{table}[h]
    \centering
    \scalebox{0.5}{
        \begin{tabular}{lrrrrrrrr}
            \toprule
            {}         & Success Rate (\%) & Correctness (m) & Accuracy & Reduction (\%) & Uncertainty Region ($m^2$) & Certainty & Spatial Certainty & Degree of Anonymity (\%) \\
            Radius (m) &                   &                 &          &                &                            &           &                   &                          \\
            \midrule
            200        & 72.06             & 59.92           & 21       & 81.89          & 473.05                     & 2.22      & 1.01              & 33.43                    \\
            400        & 2.08              & 351.85          & 17       & 90.71          & 446.35                     & 2.15      & 1.67              & 27.80                    \\
            600        & 4.55              & 473.15          & 27       & 92.46          & 734.62                     & 2.57      & 2.17              & 30.67                    \\
            800        & 2.13              & 651.38          & 42       & 95.06          & 1161.95                    & 2.87      & 2.32              & 30.84                    \\
            1000       & 0.00              & 737.93          & 37       & 96.84          & 994.80                     & 2.76      & 2.22              & 29.69                    \\
            1200       & 0.00              & 955.79          & 22       & 97.63          & 592.09                     & 2.54      & 2.28              & 25.16                    \\
            1400       & 0.00              & 986.46          & 25       & 98.08          & 697.50                     & 2.44      & 2.21              & 23.70                    \\
            \bottomrule
        \end{tabular}
    }
    \captionsetup{justification=centering}
    \caption{Aanval op basis van ruwe \ac{gps}-locaties (geen smoothing) en snelheid}\label{tab:noSmoothing}
\end{table}

\begin{table}[h]
    \centering
    \captionsetup{justification=centering}
    \caption{Aanval op basis van gesmoothe \ac{gps}-data en snelheid}\label{tab:smoothing}
    \Rotatebox{270}{
        \scalebox{0.7}{
            \begin{tabular}{lrrrrrrrrr}
                \toprule
                {}         &                      & Success Rate (\%) & Correctness (m) & Accuracy & Reduction (\%) & Uncertainty Region ($m^2$) & Certainty & Spatial Certainty & Degree of Anonymity (\%) \\
                Radius (m) & Smoothing Window (n) &                   &                 &          &                &                            &           &                   &                          \\
                \midrule

                \hline
                200        & 5                    & 73.98             & 60.35           & 22       & 82.41          & 450.52                     & 2.21      & 1.03              & 32.92                    \\
                600        & 5                    & 62.50             & 124.71          & 32       & 94.64          & 720.98                     & 2.59      & 1.58              & 29.95                    \\
                800        & 5                    & 58.93             & 186.66          & 38       & 96.31          & 806.26                     & 2.87      & 1.82              & 31.83                    \\
                1000       & 5                    & 40.20             & 243.65          & 34       & 97.43          & 812.48                     & 2.66      & 1.85              & 28.42                    \\
                1200       & 5                    & 50.00             & 249.91          & 42       & 97.55          & 1007.75                    & 2.92      & 1.91              & 29.35                    \\
                1400       & 5                    & 40.38             & 248.87          & 41       & 97.98          & 977.24                     & 2.99      & 2.11              & 29.81                    \\
                \hline
                200        & 10                   & 70.59             & 69.52           & 22       & 81.14          & 480.38                     & 2.2       & 1.06              & 33.34                    \\
                200        & 15                   & 71.67             & 61.49           & 22       & 82.75          & 480.13                     & 2.17      & 1.01              & 32.96                    \\
                200        & 20                   & 70.94             & 61.21           & 21       & 82.76          & 458.57                     & 2.21      & 1.03              & 33.35                    \\
                200        & 25                   & 72.17             & 60.44           & 22       & 83.07          & 464.94                     & 2.17      & 1.02              & 32.89                    \\
                \hline
                200        & 50                   & 72.12             & 60.67           & 20       & 82.4           & 451.9                      & 2.15      & 1.03              & 32.28                    \\
                600        & 50                   & 54.44             & 150.15          & 35       & 94.50          & 793.84                     & 2.59      & 1.63              & 29.96                    \\
                400        & 50                   & 70.53             & 96.87           & 31       & 90.66          & 685.01                     & 2.52      & 1.38              & 32.7                     \\
                800        & 50                   & 50.60             & 190.30          & 37       & 96.61          & 834.45                     & 2.72      & 1.83              & 29.26                    \\
                1000       & 50                   & 52.38             & 224.32          & 36       & 97.08          & 906.66                     & 2.71      & 1.88              & 27.93                    \\
                1200       & 50                   & 38.46             & 275.84          & 48       & 97.77          & 1127.09                    & 2.96      & 1.94              & 30.14                    \\
                1400       & 50                   & 40.24             & 335.89          & 41       & 97.96          & 1037.62                    & 2.83      & 2.11              & 27.80                    \\
                \hline
                200        & 100                  & 75.0              & 61.37           & 20       & 82.22          & 450.15                     & 2.15      & 1.04              & 32.57                    \\
                600        & 100                  & 58.97             & 141.04          & 29       & 94.89          & 692.52                     & 2.47      & 1.61              & 29.51                    \\
                800        & 100                  & 56.34             & 217.13          & 36       & 96.30          & 773.61                     & 2.80      & 1.94              & 30.30                    \\
                1000       & 100                  & 41.27             & 234.27          & 35       & 97.43          & 802.93                     & 2.69      & 1.87              & 29.13                    \\
                1200       & 100                  & 44.12             & 278.00          & 39       & 98.06          & 953.93                     & 2.73      & 1.92              & 27.86                    \\
                1400       & 100                  & 32.81             & 294.24          & 34       & 98.28          & 841.94                     & 2.82      & 2.06              & 27.51                    \\
                \hline
                200        & 110                  & 72.62             & 62.94           & 19       & 82.46          & 432.95                     & 2.15      & 1.04              & 32.23                    \\
                200        & 125                  & 72.15             & 66.86           & 20       & 82.01          & 461.84                     & 2.16      & 1.04              & 32.2                     \\
                \hline
                200        & 150                  & 72.73             & 67.81           & 20       & 82.25          & 475.05                     & 2.14      & 1.05              & 31.7                     \\
                400        & 150                  & 63.01             & 91.54           & 31       & 90.41          & 681.20                     & 2.51      & 1.44              & 32.77                    \\
                600        & 150                  & 62.69             & 145.28          & 33       & 94.05          & 831.22                     & 2.63      & 1.75              & 30.28                    \\
                800        & 150                  & 52.54             & 179.38          & 41       & 96.96          & 990.78                     & 2.70      & 1.68              & 29.72                    \\
                1000       & 150                  & 40.68             & 255.28          & 30       & 97.57          & 776.27                     & 2.54      & 1.82              & 27.57                    \\
                1200       & 150                  & 42.19             & 309.25          & 35       & 97.61          & 888.10                     & 2.73      & 2.05              & 26.69                    \\
                1400       & 150                  & 37.50             & 328.00          & 38       & 98.13          & 904.30                     & 2.75      & 2.08              & 27.24                    \\
                \bottomrule
            \end{tabular}
        }
    }
\end{table}
\begin{table}[h]
    \centering
    \scalebox{0.5}{
        \begin{tabular}{lrrrrrrrrr}
            \toprule
            {}         &                      & Success Rate (\%) & Correctness (m) & Accuracy & Reduction (\%) & Uncertainty Region ($m^2$) & Certainty & Spatial Certainty & Degree of Anonymity (\%) \\
            Radius (m) & Smoothing Window (n) &                   &                 &          &                &                            &           &                   &                          \\
            \midrule
            200        & 5                    & 53.33             & 88.56           & 28       & 77.23          & 613.0                      & 2.45      & 1.28              & 37.86                    \\
            400        & 5                    & 43.48             & 140.37          & 38       & 90.07          & 869.30                     & 2.69      & 1.56              & 34.53                    \\
            600        & 5                    & 44.14             & 176.17          & 34       & 94.33          & 772.82                     & 2.76      & 1.78              & 31.28                    \\
            800        & 5                    & 40.86             & 207.75          & 44       & 96.54          & 1047.14                    & 2.95      & 1.86              & 31.82                    \\
            1000       & 5                    & 33.01             & 279.75          & 34       & 97.20          & 898.48                     & 2.67      & 2.00              & 28.57                    \\
            1200       & 5                    & 30.10             & 345.21          & 43       & 97.41          & 1021.74                    & 2.86      & 2.07              & 28.92                    \\
            1400       & 5                    & 23.66             & 402.62          & 33       & 98.20          & 788.23                     & 2.68      & 1.91              & 26.67                    \\
            \bottomrule
        \end{tabular}
    }
    \captionsetup{justification=centering}
    \caption{Attack result with different smoothing window sizes}\label{tab:smoothingV2}
\end{table}

% Figuur: 3 stappen hoe een EPZ wordt opgezet